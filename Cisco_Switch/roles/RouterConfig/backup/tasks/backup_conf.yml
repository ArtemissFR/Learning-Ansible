#------------------------------------------#BACKUP#------------------------------------------#
---
  - name: BACKUP
    ios_config:
      backup: yes
      backup_options: 
        dir_path: /etc/ansible/roles/Learning-Ansible/Cisco_Switch/Backup
    register: config_output

  - name: BACKUP
    lineinfile:
      path: "/etc/ansible/roles/Learning-Ansible/Cisco_Switch/Backup/*.config"
      regex: 'Building configuration.*'
      state: absent

  - name: BACKUP
    lineinfile:
      path: "/etc/ansible/roles/Learning-Ansible/Cisco_Switch/Backup/*.config"
      regex: 'Current configuration.*'
      state: absent

  - name: BACKUP
    copy:
      src: "{{ config_output.backup_path }}"
      dest: "/etc/ansible/roles/Learning-Ansible/Cisco_Switch/Backup/{{ inventory_hostname }}_latest.config"
#------------------------------------------#BACKUP#------------------------------------------#

#------------------------------------------#RECAP#------------------------------------------#
  - name: RECAP
    debug:
      msg: " Your configuration has been saved in /etc/ansible/roles/Learning-Ansible/Cisco_Switch/Backup."
#------------------------------------------#RECAP#------------------------------------------#
