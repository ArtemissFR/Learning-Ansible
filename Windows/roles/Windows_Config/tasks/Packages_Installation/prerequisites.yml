- name: Check if Chocolatey is installed
  win_command: choco -v
  register: choco_version
  ignore_errors: yes

- name: Install Chocolatey if not already installed
  win_command: powershell.exe -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))"
  when: choco_version.rc != 0

